# Java-onboarding

<br/>

## π›΅οΈ JWT κΈ°λ° μΈμ¦ λ° ν† ν° λ§λ£ μ²λ¦¬ (Spring Security)
#### μ΄ ν”„λ΅μ νΈμ—μ„λ” JWT κΈ°λ° μΈμ¦ μ‹μ¤ν…μ„ κµ¬ν„ν•μ—¬ Access Tokenκ³Ό Refresh Tokenμ„ μ‚¬μ©ν•κ³ , Redisλ¥Ό μ΄μ©ν• Refresh Token μ €μ¥μΌλ΅ λ³΄μ•μ„±κ³Ό μ„±λ¥μ„ μµμ ν™”ν•μ€μµλ‹λ‹¤.

<br/>

## π“ μ „μ²΄ νλ¦„
1. ν΄λΌμ΄μ–ΈνΈκ°€ λ΅κ·ΈμΈμ„ ν•λ©΄, **Access Token**κ³Ό **Refresh Token**μ„ λ°κΈ‰λ°›μ.
2. μΈμ¦μ΄ ν•„μ”ν• μ”μ²­μ—μ„ ν΄λΌμ΄μ–ΈνΈλ” **Access Token**μ„ ν¬ν•¨ν•μ—¬ μ„λ²„μ— μ”μ²­.
3. μ„λ²„λ” **Access Token**μ„ κ²€μ¦ν•μ—¬ μ ν¨ν•λ©΄ μ”μ²­μ„ μ²λ¦¬.
4. **Access Token**μ΄ λ§λ£λμ—μ„ κ²½μ°:
   - **Refresh Token**μ„ μ΄μ©ν•μ—¬ μƒλ΅μ΄ **Access Token**μ„ λ°κΈ‰
   - **Refresh Token**λ„ λ§λ£λμ—μ„ κ²½μ°, ν΄λΌμ΄μ–ΈνΈμ—κ² **μ¬λ΅κ·ΈμΈ** μ”μ²­
5. μƒλ΅μ΄ **Access Token**μ΄ λ°κΈ‰λλ©΄ **μΏ ν‚¤**μ— μ €μ¥ν•μ—¬ μλ™μΌλ΅ κ°±μ‹ .
6. ν΄λΌμ΄μ–ΈνΈλ” μƒλ΅μ΄ **Access Token**μ„ μ‚¬μ©ν•μ—¬ λ‹¤μ‹ μ”μ²­μ„ λ³΄λƒ„.

<br/>

### π€ ν…μ¤νΈ μ½”λ“
μ΄ ν”„λ΅μ νΈλ” JWT μΈμ¦ κ΄€λ ¨ κΈ°λ¥μ„ ν…μ¤νΈν•λ” μ½”λ“μ…λ‹λ‹¤. μ•„λμ ν…μ¤νΈλ” Access Tokenκ³Ό Refresh Tokenμ μƒμ„± λ° κ²€μ¦, κ·Έλ¦¬κ³  μΏ ν‚¤μ—μ„ JWTλ¥Ό μ¶”μ¶ν•λ” λ΅μ§μ„ ν¬ν•¨ν•©λ‹λ‹¤.
> 1. Access Token μƒμ„± λ° κ²€μ¦
> * createAccessToken λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ•΅μ„Έμ¤ ν† ν°μ„ μƒμ„±ν•κ³ , λ°ν™λ ν† ν°μ΄ Bearerλ΅ μ‹μ‘ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
> 2. Refresh Token μƒμ„± λ° κ²€μ¦
> * createRefreshToken λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ λ¦¬ν”„λ μ‹ ν† ν°μ„ μƒμ„±ν•κ³ , ν•΄λ‹Ή ν† ν°μ΄ λΉ„μ–΄ μμ§€ μ•μ€μ§€ κ²€μ¦ν•©λ‹λ‹¤.
> 3. substringToken λ©”μ„λ“ κ²€μ¦
> * substringToken λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ Bearer μ ‘λ‘μ–΄λ¥Ό μ κ±°ν• ν›„ μ ν¨ν• ν† ν°μ„ μ¶”μ¶ν•λ”μ§€ ν…μ¤νΈν•©λ‹λ‹¤.
> * μλ»λ ν•μ‹μ ν† ν°μ΄ λ“¤μ–΄μ¬ κ²½μ° IllegalArgumentException μμ™Έκ°€ λ°μƒν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
> 4. Claims μ¶”μ¶ λ° κ²€μ¦
> * μ•΅μ„Έμ¤ ν† ν°μ„ μƒμ„±ν• ν›„, extractClaims λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ JWTμ—μ„ ν΄λ μ„μ„ μ •ν™•ν•κ² μ¶”μ¶ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
> 5. resolveToken λ©”μ„λ“ κ²€μ¦
> * HTTP μ”μ²­μ—μ„ β€Bearerβ€ μΏ ν‚¤λ¥Ό μ°Ύμ•„ κ·Έ κ°’μ„ λ°ν™ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. 
> * μΏ ν‚¤μ— β€Bearerβ€ κ°’μ΄ μ—†μΌλ©΄ nullμ„ λ°ν™ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
